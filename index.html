<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aurion Finance - Where Blockchain Meets Sustainable Growth</title>
    <link rel="icon" type="image/png" href="images/logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bignumber.js@9.1.2/bignumber.min.js"></script>
    <style>
        :root {
            --primary-black: #0A0A0A;
            --secondary-black: #1A1A1A;
            --tertiary-black: #2A2A2A;
            --primary-gold: #D4AF37;
            --secondary-gold: #FFD700;
            --accent-gold: #F5D76E;
            --light-gold: #FFF9E6;
            --white: #FFFFFF;
            --gray-300: #D4D4D3;
            --gray-400: #A3A3A3;
            --gray-500: #737373;

            --gradient-gold: linear-gradient(135deg, var(--primary-gold) 0%, var(--secondary-gold) 100%);
            --gradient-dark: linear-gradient(135deg, var(--primary-black) 0%, var(--secondary-black) 100%);
            --gradient-elegant: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(255, 215, 0, 0.08) 100%);

            --shadow-gold: 0 0 20px rgba(212, 175, 55, 0.3);
            --shadow-gold-lg: 0 0 40px rgba(212, 175, 55, 0.4);
            --shadow-elegant: 0 8px 32px rgba(0, 0, 0, 0.2);

            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-heading: 'Montserrat', sans-serif;
            --font-size-base: 1rem;
            --font-size-sm: 0.875rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;
            --font-size-5xl: 3rem;
            --font-size-6xl: 3.75rem;

            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            --spacing-3xl: 4rem;
            --spacing-4xl: 6rem;

            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;

            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;

            /* For cursor spotlight */
            --mouse-x: 50%;
            --mouse-y: 50%;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-primary);
            background: var(--primary-black);
            color: var(--white);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        #spotlight {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9998;
            background: radial-gradient(
                circle at var(--mouse-x) var(--mouse-y),
                rgba(212, 175, 55, 0.1) 0%,
                transparent 15%,
                transparent 100%
            );
            opacity: 0.7;
            transition: background 0.1s ease;
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 var(--spacing-lg); }

        .fade-in { opacity: 0; transform: translateY(30px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .fade-in.visible { opacity: 1; transform: translateY(0); }

        .preloader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--primary-black);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 9999;
            transition: opacity var(--transition-slow);
        }
        .preloader.fade-out { opacity: 0; pointer-events: none; }
        .loader { display: flex; gap: var(--spacing-sm); margin-bottom: var(--spacing-lg); }
        .gold-bar { width: 6px; height: 30px; background: var(--gradient-gold); border-radius: 0.375rem; animation: loader 1.2s ease-in-out infinite; box-shadow: var(--shadow-gold); }
        .gold-bar:nth-child(2) { animation-delay: 0.1s; }
        .gold-bar:nth-child(3) { animation-delay: 0.2s; }
        .gold-bar:nth-child(4) { animation-delay: 0.3s; }
        .gold-bar:nth-child(5) { animation-delay: 0.4s; }
        @keyframes loader { 0%, 40%, 100% { transform: scaleY(1); } 20% { transform: scaleY(2.5); } }
        .preloader-text { font-family: var(--font-heading); font-size: var(--font-size-xl); color: var(--primary-gold); letter-spacing: 2px; font-weight: 600; }

        .header {
            position: fixed; top: 0; left: 0; width: 100%;
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
            z-index: 1000;
            transition: all var(--transition-normal);
        }
        .nav { display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md) 0; }
        .nav__logo { display: flex; align-items: center; gap: var(--spacing-sm); }
        .logo { width: 35px; height: 35px; filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.3)); }
        .logo__text { font-family: var(--font-heading); font-size: var(--font-size-lg); font-weight: 700; background: var(--gradient-gold); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; letter-spacing: 1px; }
        .nav__menu { display: flex; align-items: center; gap: var(--spacing-2xl); }
        .nav__list { display: flex; gap: var(--spacing-xl); list-style: none; }
        .nav__link { color: var(--gray-300); text-decoration: none; font-weight: 500; transition: color 0.15s ease; position: relative; cursor: pointer; font-size: var(--font-size-sm); letter-spacing: 0.5px; }
        .nav__link:hover, .nav__link.active { color: var(--primary-gold); }
        .nav__link.active::after { content: ''; position: absolute; bottom: -8px; left: 0; width: 100%; height: 2px; background: var(--gradient-gold); box-shadow: var(--shadow-gold); }
        .nav__toggle { display: none; font-size: var(--font-size-xl); cursor: pointer; color: var(--primary-gold); }

        .btn { display: inline-flex; align-items: center; justify-content: center; gap: var(--spacing-sm); padding: var(--spacing-md) var(--spacing-xl); border: none; border-radius: var(--radius-lg); font-size: var(--font-size-base); font-weight: 600; text-decoration: none; cursor: pointer; transition: all var(--transition-normal); position: relative; overflow: hidden; letter-spacing: 0.5px; }
        .btn--primary { background: var(--gradient-gold); color: var(--primary-black); box-shadow: var(--shadow-gold); }
        .btn--primary:hover { transform: translateY(-3px); box-shadow: var(--shadow-gold-lg); }
        .btn--outline { background: transparent; color: var(--white); border: 2px solid var(--primary-gold); }
        .btn--outline:hover { background: rgba(212, 175, 55, 0.1); transform: translateY(-3px); }
        .btn i { font-size: var(--font-size-lg); }

        .section { padding: var(--spacing-4xl) 0; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; text-align: center; }
        .section .container { width: 100%; }
        .section__title { font-family: var(--font-heading); font-size: var(--font-size-5xl); text-align: center; margin-bottom: var(--spacing-md); background: var(--gradient-gold); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; letter-spacing: 1px; font-weight: 700; }
        .section__subtitle { font-size: var(--font-size-xl); text-align: center; color: var(--gray-400); margin-bottom: var(--spacing-3xl); max-width: 700px; margin-left: auto; margin-right: auto; line-height: 1.7; }
        .gradient-text { background: var(--gradient-gold); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }

        .hero { padding-top: 140px; background: var(--gradient-dark); position: relative; overflow: hidden; }
        .hero::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 1px; background: linear-gradient(90deg, transparent, var(--primary-gold), transparent); }
        .hero__container { display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-3xl); align-items: center; }
        .hero__content { text-align: left; }
        .badge { display: inline-block; padding: var(--spacing-sm) var(--spacing-md); background: rgba(212, 175, 55, 0.1); border: 1px solid var(--primary-gold); border-radius: var(--radius-lg); color: var(--primary-gold); font-size: var(--font-size-sm); font-weight: 600; letter-spacing: 1px; margin-bottom: var(--spacing-lg); }
        .hero__title { font-family: var(--font-heading); font-size: var(--font-size-6xl); margin-bottom: var(--spacing-lg); line-height: 1.1; letter-spacing: 1px; font-weight: 800; }
        .hero__description { font-size: var(--font-size-xl); color: var(--gray-300); margin-bottom: var(--spacing-2xl); max-width: 500px; line-height: 1.7; }
        .hero__buttons { display: flex; gap: var(--spacing-md); margin-bottom: var(--spacing-3xl); }
        .hero__stats { display: flex; gap: var(--spacing-2xl); text-align: left; }
        .stat__value { font-size: var(--font-size-3xl); font-weight: 700; color: var(--primary-gold); margin-bottom: 0.25rem; font-family: var(--font-heading); }
        .stat__label { font-size: var(--font-size-sm); color: var(--gray-400); letter-spacing: 0.5px; }
        
        .spline-container { width: 100%; height: 500px; min-height: 400px; position: relative; }
        .spline-container canvas { border-radius: var(--radius-2xl); }

        .tilt-card { transition: transform 0.1s ease-out; transform-style: preserve-3d; will-change: transform; }

        .dashboard-section, .referral-section, .whitepaper-section, .audit-section, .faq-section, .resources-section { background: var(--secondary-black); }
        .quick-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-lg); margin-bottom: var(--spacing-3xl); text-align: left; }
        .stat-card { background: var(--gradient-elegant); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-2xl); padding: var(--spacing-2xl); display: flex; align-items: center; gap: var(--spacing-lg); transition: all var(--transition-normal); backdrop-filter: blur(10px); box-shadow: var(--shadow-elegant); }
        .stat-card:hover { border-color: var(--primary-gold); box-shadow: var(--shadow-gold-lg); }
        .stat-icon { width: 70px; height: 70px; background: var(--gradient-gold); border-radius: var(--radius-xl); display: flex; align-items: center; justify-content: center; font-size: var(--font-size-2xl); color: var(--primary-black); box-shadow: var(--shadow-gold); flex-shrink: 0; }
        .stat-value { font-size: var(--font-size-2xl); font-weight: 700; color: var(--primary-gold); margin-bottom: 0.25rem; font-family: var(--font-heading); }
        .stat-label { color: var(--gray-400); font-size: var(--font-size-sm); letter-spacing: 0.5px; }
        .action-buttons { display: flex; gap: var(--spacing-md); margin-bottom: var(--spacing-3xl); flex-wrap: wrap; justify-content: center; }
        .empty-state { text-align: center; padding: var(--spacing-4xl); background: var(--gradient-elegant); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-2xl); backdrop-filter: blur(10px); box-shadow: var(--shadow-elegant); display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .empty-icon { width: 100px; height: 100px; background: var(--gradient-gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: var(--font-size-3xl); color: var(--primary-black); margin: 0 auto var(--spacing-lg); box-shadow: var(--shadow-gold); }
        .empty-state h3 { margin-bottom: var(--spacing-md); color: var(--white); font-family: var(--font-heading); font-size: var(--font-size-2xl); }
        .empty-state p { color: var(--gray-400); margin-bottom: var(--spacing-xl); max-width: 400px; margin-left: auto; margin-right: auto; line-height: 1.6; }

        .invest-section { background: var(--primary-black); }
        .investment-plans { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: var(--spacing-2xl); margin-bottom: var(--spacing-3xl); }
        .plan-card { background: var(--gradient-elegant); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-2xl); padding: var(--spacing-2xl); text-align: center; transition: all var(--transition-normal); position: relative; cursor: pointer; backdrop-filter: blur(10px); box-shadow: var(--shadow-elegant); height: 100%; display: flex; flex-direction: column; justify-content: space-between; }
        .plan-card:hover { border-color: var(--primary-gold); box-shadow: var(--shadow-gold-lg); }
        .plan-card.featured { border-color: var(--primary-gold); box-shadow: var(--shadow-gold-lg); transform: scale(1.05); }
        .plan-card.featured::before { content: 'RECOMMENDED'; position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: var(--gradient-gold); color: var(--primary-black); padding: 0.25rem var(--spacing-lg); border-radius: var(--radius-lg); font-size: var(--font-size-sm); font-weight: 700; letter-spacing: 1px; box-shadow: var(--shadow-gold); }
        .plan-card.featured:hover { transform: scale(1.05); }
        .plan-name { font-size: var(--font-size-xl); margin-bottom: var(--spacing-md); color: var(--white); font-family: var(--font-heading); }
        .plan-roi { font-size: var(--font-size-3xl); font-weight: 700; color: var(--primary-gold); margin-bottom: var(--spacing-md); font-family: var(--font-heading); }
        .plan-range { background: rgba(212, 175, 55, 0.1); padding: var(--spacing-md); border-radius: var(--radius-lg); margin: var(--spacing-lg) 0; font-weight: 600; color: var(--primary-gold); border: 1px solid rgba(212, 175, 55, 0.2); }
        .plan-features { list-style: none; margin: var(--spacing-lg) 0; text-align: left; flex-grow: 1; }
        .plan-features li { padding: var(--spacing-sm) 0; color: var(--gray-300); border-bottom: 1px solid rgba(212, 175, 55, 0.1); display: flex; align-items: center; }
        .plan-features li:last-child { border-bottom: none; }
        .plan-features li i { color: var(--primary-gold); margin-right: var(--spacing-sm); font-size: var(--font-size-sm); }
        .investment-form-container { background: var(--gradient-elegant); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-2xl); padding: var(--spacing-3xl); margin-bottom: var(--spacing-3xl); display: none; backdrop-filter: blur(10px); box-shadow: var(--shadow-elegant); width: 100%; max-width: 600px; }
        .investment-form-container.active { display: block; }
        .form-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-2xl); padding-bottom: var(--spacing-lg); border-bottom: 1px solid rgba(212, 175, 55, 0.1); }
        .form-header h2 { margin: 0; color: var(--white); font-family: var(--font-heading); font-size: var(--font-size-3xl); }
        .investment-form { max-width: 500px; margin: 0 auto; text-align: left; }
        .form-group { margin-bottom: var(--spacing-xl); }
        .form-group label { display: block; margin-bottom: var(--spacing-sm); color: var(--white); font-weight: 600; font-size: var(--font-size-lg); }
        .form-input { width: 100%; padding: var(--spacing-lg); background: rgba(10, 10, 10, 0.8); border: 1px solid rgba(212, 175, 55, 0.3); border-radius: var(--radius-lg); color: var(--white); font-size: var(--font-size-base); transition: all var(--transition-normal); }
        .form-input:focus { outline: none; border-color: var(--primary-gold); box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1); }
        .amount-range { margin-top: var(--spacing-sm); font-size: var(--font-size-sm); color: var(--gray-400); }
        .plan-summary { background: rgba(212, 175, 55, 0.1); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-lg); padding: var(--spacing-lg); color: var(--white); }
        .investment-summary { background: rgba(10, 10, 10, 0.8); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-lg); padding: var(--spacing-xl); margin: var(--spacing-2xl) 0; }
        .investment-summary h3 { margin-bottom: var(--spacing-lg); color: var(--white); text-align: center; font-family: var(--font-heading); font-size: var(--font-size-xl); }
        .summary-item { display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md) 0; border-bottom: 1px solid rgba(212, 175, 55, 0.1); color: var(--gray-300); }
        .summary-item:last-child { border-bottom: none; }

        .investment-success-popup { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); display: flex; justify-content: center; align-items: center; z-index: 2000; opacity: 0; visibility: hidden; transition: all var(--transition-normal); }
        .investment-success-popup.active { opacity: 1; visibility: visible; }
        .investment-success { background: var(--gradient-elegant); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-2xl); padding: var(--spacing-xl); text-align: center; max-width: 400px; width: 90%; backdrop-filter: blur(10px); box-shadow: var(--shadow-elegant); transform: scale(0.9); transition: transform var(--transition-normal); }
        .investment-success-popup.active .investment-success { transform: scale(1); }
        .success-icon { width: 80px; height: 80px; background: var(--gradient-gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: var(--font-size-2xl); color: var(--primary-black); margin: 0 auto var(--spacing-lg); box-shadow: var(--shadow-gold); }
        .investment-success h2 { margin-bottom: var(--spacing-md); color: var(--white); font-family: var(--font-heading); font-size: var(--font-size-xl); }
        .investment-success p { color: var(--gray-400); margin-bottom: var(--spacing-xl); line-height: 1.6; font-size: var(--font-size-base); }
        .success-actions { display: flex; gap: var(--spacing-md); justify-content: center; flex-wrap: wrap; }

        .referral-link-container { background: var(--gradient-elegant); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-2xl); padding: var(--spacing-3xl); margin-bottom: var(--spacing-3xl); backdrop-filter: blur(10px); box-shadow: var(--shadow-elegant); width: 100%; max-width: 800px; }
        .referral-link-container h2 { text-align: center; font-family: var(--font-heading); color: var(--white); font-size: var(--font-size-2xl); margin-bottom: var(--spacing-sm); }
        .referral-link-container p { text-align: center; color: var(--gray-400); margin-bottom: var(--spacing-xl); }
        .link-display { display: flex; gap: var(--spacing-md); margin-bottom: var(--spacing-lg); }
        .link-input { flex: 1; padding: var(--spacing-lg); background: rgba(10, 10, 10, 0.8); border: 1px solid rgba(212, 175, 55, 0.3); border-radius: var(--radius-lg); color: var(--white); font-size: var(--font-size-base); }
        .social-share { display: flex; justify-content: center; gap: var(--spacing-md); }
        .social-btn { width: 60px; height: 60px; background: rgba(212, 175, 55, 0.1); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-lg); color: var(--primary-gold); font-size: var(--font-size-xl); cursor: pointer; transition: all var(--transition-normal); display: flex; align-items: center; justify-content: center; }
        .social-btn:hover { background: var(--primary-gold); color: var(--primary-black); transform: translateY(-5px); box-shadow: var(--shadow-gold); }
        .levels-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--spacing-2xl); margin-bottom: var(--spacing-3xl); text-align: left; }
        .level-card { background: var(--gradient-elegant); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-2xl); padding: var(--spacing-2xl); transition: all var(--transition-normal); backdrop-filter: blur(10px); box-shadow: var(--shadow-elegant); }
        .level-card:hover { border-color: var(--primary-gold); box-shadow: var(--shadow-gold-lg); }
        .level-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-lg); padding-bottom: var(--spacing-md); border-bottom: 1px solid rgba(212, 175, 55, 0.1); }
        .level-number { width: 50px; height: 50px; background: var(--gradient-gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--primary-black); font-weight: 700; font-size: var(--font-size-xl); box-shadow: var(--shadow-gold); flex-shrink: 0; }
        .level-commission { font-size: var(--font-size-xl); font-weight: 700; color: var(--primary-gold); font-family: var(--font-heading); text-align: right; }
        .requirement i { color: var(--primary-gold); }
        .steps-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-2xl); }
        .step-card { background: var(--gradient-elegant); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-2xl); padding: var(--spacing-2xl); text-align: center; transition: all var(--transition-normal); backdrop-filter: blur(10px); box-shadow: var(--shadow-elegant); }
        .step-card:hover { border-color: var(--primary-gold); }
        .step-number { width: 70px; height: 70px; background: var(--gradient-gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--primary-black); font-weight: 700; font-size: var(--font-size-2xl); margin: 0 auto var(--spacing-lg); box-shadow: var(--shadow-gold); }
        .step-card h3 { margin-bottom: var(--spacing-md); color: var(--white); font-family: var(--font-heading); font-size: var(--font-size-xl); }
        .step-card p { color: var(--gray-300); line-height: 1.6; }

        .whitepaper-content, .audit-content { background: var(--gradient-elegant); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-2xl); padding: var(--spacing-4xl); backdrop-filter: blur(10px); box-shadow: var(--shadow-elegant); }
        .chapter-title { font-size: var(--font-size-2xl); color: var(--primary-gold); margin-bottom: var(--spacing-lg); display: flex; align-items: center; gap: var(--spacing-md); font-family: var(--font-heading); }
        .faq-item { background: var(--gradient-elegant); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-xl); margin-bottom: var(--spacing-lg); overflow: hidden; backdrop-filter: blur(10px); box-shadow: var(--shadow-elegant); }
        .faq-question { padding: var(--spacing-xl); display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: all var(--transition-normal); }
        .faq-item.active .faq-answer { padding: 0 var(--spacing-xl) var(--spacing-xl); max-height: 500px; }
        .faq-item.active .faq-icon { transform: rotate(180deg); }
        .alert { display: flex; align-items: center; gap: var(--spacing-md); padding: var(--spacing-lg); border-radius: var(--radius-lg); margin-bottom: var(--spacing-2xl); border: 1px solid; backdrop-filter: blur(10px); max-width: 800px; width: 100%; margin-left: auto; margin-right: auto; text-align: left; }
        .alert-warning { background: rgba(245, 158, 11, 0.1); border-color: #F59E0B; color: #F59E0B; }
        .notification { position: fixed; top: 20px; right: 20px; padding: var(--spacing-lg) var(--spacing-xl); background: var(--secondary-black); border: 1px solid var(--primary-gold); border-radius: var(--radius-lg); color: var(--white); box-shadow: var(--shadow-lg); transform: translateX(150%); transition: transform var(--transition-normal); z-index: 3000; max-width: 400px; backdrop-filter: blur(10px); }
        .notification.show { transform: translateX(0); }
        .notification.success { border-color: #10B981; background: rgba(16, 185, 129, 0.1); }
        .notification.error { border-color: #EF4444; background: rgba(239, 68, 68, 0.1); }
        
        .resources-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: var(--spacing-2xl); margin-bottom: var(--spacing-3xl); }
        .resource-card { background: var(--gradient-elegant); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: var(--radius-2xl); padding: var(--spacing-2xl); text-align: center; transition: all var(--transition-normal); backdrop-filter: blur(10px); height: 100%; display: flex; flex-direction: column; box-shadow: var(--shadow-elegant); }
        .resource-card:hover { border-color: var(--primary-gold); box-shadow: var(--shadow-gold-lg); }
        .resource-icon { width: 90px; height: 90px; background: var(--gradient-gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: var(--font-size-3xl); color: var(--primary-black); margin: 0 auto var(--spacing-lg); box-shadow: var(--shadow-gold); }

        .footer { background: var(--primary-black); border-top: 1px solid rgba(212, 175, 55, 0.1); padding: var(--spacing-4xl) 0 var(--spacing-xl); min-height: auto; }
        .footer__content { display: grid; grid-template-columns: 1fr 2fr; gap: var(--spacing-3xl); margin-bottom: var(--spacing-2xl); text-align: left; }
        .footer__brand { display: flex; flex-direction: column; gap: var(--spacing-md); }
        .footer__logo { display: flex; align-items: center; gap: var(--spacing-sm); font-size: var(--font-size-xl); font-weight: 700; color: var(--primary-gold); font-family: var(--font-heading); }
        .footer__logo img { width: 35px; height: 35px; filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.3)); }
        .footer__social { display: flex; gap: var(--spacing-md); }
        .social__link { width: 45px; height: 45px; background: rgba(212, 175, 55, 0.1); border: 1px solid var(--primary-gold); border-radius: 0.5rem; display: flex; align-items: center; justify-content: center; color: var(--primary-gold); text-decoration: none; transition: all var(--transition-normal); }
        .social__link:hover { background: var(--primary-gold); color: var(--primary-black); transform: translateY(-3px); box-shadow: var(--shadow-gold); }
        .footer__links { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--spacing-2xl); }
        .footer__column h4 { color: var(--white); margin-bottom: var(--spacing-lg); font-size: var(--font-size-lg); font-family: var(--font-heading); }
        .footer__column a { display: block; color: var(--gray-400); text-decoration: none; margin-bottom: var(--spacing-sm); transition: color 0.15s ease; }
        .footer__column a:hover { color: var(--primary-gold); }
        .footer__bottom { border-top: 1px solid rgba(212, 175, 55, 0.1); padding-top: var(--spacing-lg); text-align: center; color: var(--gray-500); }

        @media (max-width: 1024px) {
            .hero__container { grid-template-columns: 1fr; gap: var(--spacing-2xl); text-align: center; }
            .hero__content { text-align: center; display: flex; flex-direction: column; align-items: center; }
            .hero__buttons, .hero__stats { justify-content: center; }
            .footer__content { grid-template-columns: 1fr; gap: var(--spacing-2xl); text-align: center; }
            .footer__brand { align-items: center; }
        }
        @media (max-width: 768px) {
            .nav__menu { position: fixed; top: 70px; left: -100%; width: 80%; height: calc(100vh - 70px); background: var(--secondary-black); flex-direction: column; justify-content: flex-start; align-items: flex-start; padding: var(--spacing-2xl); transition: left var(--transition-normal); border-right: 1px solid rgba(212, 175, 55, 0.1); backdrop-filter: blur(20px); }
            .nav__menu.active { left: 0; }
            .nav__list { flex-direction: column; gap: var(--spacing-lg); width: 100%; }
            .nav__buttons { width: 100%; margin-top: var(--spacing-xl); }
            .nav__toggle { display: block; }
            .hero__title { font-size: var(--font-size-4xl); }
            .spline-container { height: 400px; }
            .footer__links { grid-template-columns: 1fr; gap: var(--spacing-xl); text-align: center; }
        }
    </style>
</head>
<body>
    <div id="spotlight"></div>

    <div class="preloader">
        <div class="loader">
            <div class="gold-bar"></div><div class="gold-bar"></div><div class="gold-bar"></div><div class="gold-bar"></div><div class="gold-bar"></div>
        </div>
        <div class="preloader-text">AURION CLUB</div>
    </div>

    <header class="header">
        <nav class="nav container">
            <div class="nav__logo">
                <img src="images/logo.png" alt="AURION CLUB" class="logo">
                <div class="logo__text">AURION CLUB</div>
            </div>
            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="nav__item"><a class="nav__link active" data-section="home">Home</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="dashboard">Dashboard</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="invest">Invest</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="referral">Referral</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="whitepaper">Whitepaper</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="audit">Audit Report</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="downloads">Downloads</a></li>
                    <li class="nav__item"><a class="nav__link" data-section="faq">FAQ</a></li>
                </ul>
                <div class="nav__buttons">
                    <button class="btn btn--outline" id="connectWallet"><i class="fas fa-wallet"></i> Connect Wallet</button>
                </div>
            </div>
            <div class="nav__toggle" id="nav-toggle"><i class="fas fa-bars"></i></div>
        </nav>
    </header>

    <main class="main">
        <section class="hero section" id="home">
            <div class="hero__container container">
                <div class="hero__content fade-in">
                    <span class="badge">The Next Generation in the DeFi World</span>
                    <h1 class="hero__title">
                        <span class="gradient-text">Aurion Club</span> – Where Blockchain Meets Sustainable Growth
                    </h1>
                    <p class="hero__description">
                        Experience decentralized wealth creation through verified smart contracts, fixed ROI plans, and tiered referral bonuses – designed to empower investors with security, clarity, and passive income stability.
                    </p>
                    <div class="hero__buttons">
                        <button class="btn btn--primary" data-section="invest"><i class="fas fa-rocket"></i> Start Investing</button>
                        <button class="btn btn--outline" data-section="dashboard"><i class="fas fa-chart-line"></i> View Dashboard</button>
                    </div>
                    <div class="hero__stats">
                        <div class="stat"><div class="stat__value" id="totalTVL">$0</div><div class="stat__label">Total Value Locked</div></div>
                        <div class="stat"><div class="stat__value" id="totalUsers">0</div><div class="stat__label">Total Investors</div></div>
                        <div class="stat"><div class="stat__value" id="totalPaid">$0</div><div class="stat__label">Total Paid Out</div></div>
                    </div>
                </div>
                <div class="spline-container fade-in">
                    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.0.98/build/spline-viewer.js"></script>
                    <spline-viewer loading-anim-type="spinner" url="https://prod.spline.design/q-yR-008a0s02BfH/scene.splinecode"></spline-viewer>
                </div>
            </div>
        </section>

        <section class="dashboard-section section" id="dashboard" style="display: none;">
            <div class="container">
                <div class="section__header fade-in">
                    <h2 class="section__title">Your Dashboard</h2>
                    <p class="section__subtitle">Monitor your investments and earnings in real-time with our premium analytics.</p>
                </div>
                <div class="alert alert-warning fade-in" id="dashboardWalletAlert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Please connect your wallet to view your dashboard</span>
                </div>
                <div class="quick-stats fade-in" id="quickStats" style="display: none;">
                    <div class="stat-card tilt-card"><div class="stat-icon"><i class="fas fa-wallet"></i></div><div class="stat-info"><div class="stat-value" id="totalDeposits">0 USDT</div><div class="stat-label">Total Deposits</div></div></div>
                    <div class="stat-card tilt-card"><div class="stat-icon"><i class="fas fa-chart-line"></i></div><div class="stat-info"><div class="stat-value" id="availableEarnings">0 USDT</div><div class="stat-label">Available Earnings</div></div></div>
                    <div class="stat-card tilt-card"><div class="stat-icon"><i class="fas fa-arrow-down"></i></div><div class="stat-info"><div class="stat-value" id="totalWithdrawn">0 USDT</div><div class="stat-label">Total Withdrawn</div></div></div>
                    <div class="stat-card tilt-card"><div class="stat-icon"><i class="fas fa-gift"></i></div><div class="stat-info"><div class="stat-value" id="referralBonus">0 USDT</div><div class="stat-label">Referral Earnings</div></div></div>
                </div>
                <div class="action-buttons fade-in" id="actionButtons" style="display: none;">
                    <button class="btn btn--primary" data-section="invest"><i class="fas fa-rocket"></i> Start Investing</button>
                    <button class="btn btn--outline" id="withdrawEarnings"><i class="fas fa-download"></i> Withdraw Earnings</button>
                    <button class="btn btn--outline" data-section="referral"><i class="fas fa-share"></i> Referral Program</button>
                </div>
                <div class="empty-state tilt-card fade-in" id="noInvestmentsMessage" style="display: none;">
                    <div class="empty-icon"><i class="fas fa-chart-pie"></i></div>
                    <h3>No Investment History</h3>
                    <p>Start your first investment to begin earning premium returns.</p>
                    <button class="btn btn--primary" data-section="invest"><i class="fas fa-rocket"></i> Start Investing</button>
                </div>
            </div>
        </section>

        <section class="invest-section section" id="invest" style="display: none;">
            <div class="container">
                <div class="section__header fade-in">
                    <h2 class="section__title">Investment Plans</h2>
                    <p class="section__subtitle">Select from our exclusive investment tiers and start earning premium returns.</p>
                </div>
                <div class="alert alert-warning fade-in" id="investWalletAlert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Please connect your wallet to start investing.</span>
                </div>
                <div class="investment-plans fade-in" id="investmentPlans"></div>
                <div class="investment-form-container tilt-card" id="investmentForm">
                    <div class="form-header">
                        <h2>Complete Your Investment</h2>
                        <button class="btn btn--outline btn-sm" id="backToPlans"><i class="fas fa-arrow-left"></i> Back to Plans</button>
                    </div>
                    <div class="investment-form">
                        <div class="form-group">
                            <label for="selectedPlan">Selected Plan</label>
                            <div class="plan-summary" id="selectedPlanSummary"></div>
                        </div>
                        <div class="form-group">
                            <label for="investmentAmount">Investment Amount (USDT)</label>
                            <input type="number" id="investmentAmount" class="form-input" placeholder="Enter amount in USDT" min="20" step="1">
                            <div class="amount-range" id="amountRange"></div>
                        </div>
                        <div class="form-group">
                            <label for="referrerAddress">Referrer Address (Optional)</label>
                            <input type="text" id="referrerAddress" class="form-input" placeholder="Enter referrer wallet address">
                            <small>If you were referred by someone, enter their wallet address here.</small>
                        </div>
                        <div class="investment-summary">
                            <h3>Investment Summary</h3>
                            <div class="summary-item">
                                <span>Investment Amount:</span>
                                <span id="summaryAmount">0 USDT</span>
                            </div>
                        </div>
                        <button class="btn btn--primary btn-lg" id="confirmInvestment" style="width: 100%;"><i class="fas fa-check-circle"></i> Confirm Investment</button>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="referral-section section" id="referral" style="display: none;">
            <div class="container">
                <div class="section__header fade-in">
                    <h2 class="section__title">Referral Program</h2>
                    <p class="section__subtitle">Earn exclusive commissions from 4 levels of your referral network</p>
                </div>
                 <div class="alert alert-warning fade-in" id="referralWalletAlert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Please connect your wallet to access referral program</span>
                </div>
                 <div class="referral-link-container tilt-card fade-in" id="referralLinkSection" style="display: none;">
                    <h2>Your Referral Link</h2>
                    <p>Share this link with your network and earn premium commissions from their investments</p>
                    <div class="link-display">
                        <input type="text" id="referralLink" class="link-input" readonly>
                        <button class="btn btn--primary" id="copyLink"><i class="fas fa-copy"></i> Copy</button>
                    </div>
                    <div class="social-share">
                        <button class="social-btn" id="shareTelegram"><i class="fab fa-telegram"></i></button>
                        <button class="social-btn" id="shareTwitter"><i class="fab fa-twitter"></i></button>
                        <button class="social-btn" id="shareWhatsapp"><i class="fab fa-whatsapp"></i></button>
                    </div>
                </div>
                 <div class="levels-grid fade-in">
                 </div>
            </div>
        </section>
        
        <!-- Other Sections Placeholder -->
        <section class="whitepaper-section section" id="whitepaper" style="display: none;"></section>
        <section class="audit-section section" id="audit" style="display: none;"></section>
        <section class="resources-section section" id="downloads" style="display: none;"></section>
        <section class="faq-section section" id="faq" style="display: none;"></section>

    </main>
    
    <footer class="footer">
        <div class="container">
            <div class="footer__content fade-in">
                <div class="footer__brand">
                    <div class="footer__logo">
                        <img src="images/logo.png" alt="Aurion Club">
                        <span>Aurion Club</span>
                    </div>
                    <p>Experience decentralized wealth creation through verified smart contracts.</p>
                    <div class="footer__social">
                        <a href="https://t.me/AurionClub" class="social__link"><i class="fab fa-telegram"></i></a>
                        <a href="https://bscscan.com/address/0xAD81F7819465e3e4201C587c20C4b8E1Bb9920eb#code" class="social__link"><i class="fas fa-file-contract"></i></a>
                        <a href="https://t.me/AurionClubSupport" class="social__link"><i class="fas fa-headset"></i></a>
                    </div>
                </div>
                <div class="footer__links">
                    <div class="footer__column">
                        <h4>Platform</h4>
                        <a class="footer-link" data-section="home">Home</a>
                        <a class="footer-link" data-section="invest">Invest</a>
                        <a class="footer-link" data-section="referral">Referral</a>
                        <a class="footer-link" data-section="dashboard">Dashboard</a>
                    </div>
                    <div class="footer__column">
                        <h4>Resources</h4>
                        <a class="footer-link" data-section="whitepaper">Whitepaper</a>
                        <a class="footer-link" data-section="audit">Audit Report</a>
                        <a class="footer-link" data-section="downloads">Downloads</a>
                        <a class="footer-link" data-section="faq">FAQ</a>
                    </div>
                    <div class="footer__column">
                        <h4>Support</h4>
                        <a href="https://t.me/AurionClubSupport">Contact Us</a>
                        <a href="https://t.me/AurionClub">Community</a>
                    </div>
                </div>
            </div>
            <div class="footer__bottom">
                <p>&copy; 2025 Aurion Club</p>
            </div>
        </div>
    </footer>

    <div class="notification" id="notification"></div>
    <div class="investment-success-popup" id="investmentSuccessPopup">
        <div class="investment-success">
            <div class="success-icon"><i class="fas fa-check-circle"></i></div>
            <h2>Investment Successful!</h2>
            <p>You can now monitor your earnings in the dashboard.</p>
            <div class="success-actions">
                <button class="btn btn--primary" data-section="dashboard"><i class="fas fa-tachometer-alt"></i> Go to Dashboard</button>
                <button class="btn btn--outline" id="newInvestment"><i class="fas fa-plus"></i> New Investment</button>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script>
        // --- START OF SCRIPT ---
        
        const CONTRACT_ADDRESS = '0xAD81F7819465e3e4201C587c20C4b8E1Bb9920eb';
        const USDT_ADDRESS = '0x55d398326f99059fF775485246999027B3197955';
        const USDT_ABI = [{"constant": false, "inputs": [{"name": "_spender", "type": "address"}, {"name": "_value", "type": "uint256"}], "name": "approve", "outputs": [{"name": "", "type": "bool"}], "type": "function"}, {"constant": true, "inputs": [{"name": "_owner", "type": "address"}], "name": "balanceOf", "outputs": [{"name": "balance", "type": "uint256"}], "type": "function"}, {"constant": true, "inputs": [{"name": "_owner", "type": "address"}, {"name": "_spender", "type": "address"}], "name": "allowance", "outputs": [{"name": "", "type": "uint256"}], "type": "function"}];
        const CONTRACT_ABI = [{"inputs":[{"internalType":"address","name":"_usdtToken","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"planId","type":"uint256"},{"indexed":false,"internalType":"address","name":"upline","type":"address"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"address","name":"referral","type":"address"},{"indexed":false,"internalType":"uint256","name":"level","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"ReferralBonus","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"fee","type":"uint256"}],"name":"Withdraw","type":"event"},{"inputs":[],"name":"DAILY_WITHDRAWAL_LIMIT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"calculateAvailableEarnings","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint256","name":"_planId","type":"uint256"},{"internalType":"address","name":"_upline","type":"address"}],"name":"deposit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getContractBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getUserInfo","outputs":[{"internalType":"uint256","name":"totalDeposits","type":"uint256"},{"internalType":"uint256","name":"totalWithdrawn","type":"uint256"},{"internalType":"uint256","name":"directReferrals","type":"uint256"},{"internalType":"uint256","name":"referralBonus","type":"uint256"},{"internalType":"uint256","name":"availableEarnings","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}];

        let web3, contract, usdtContract, userAccount, selectedPlan = null, referralAddress = null;

        const preloader = document.querySelector('.preloader');
        const navMenu = document.getElementById('nav-menu');
        const navToggle = document.getElementById('nav-toggle');
        const connectWalletBtn = document.getElementById('connectWallet');
        const notification = document.getElementById('notification');
        const sections = {
            home: document.getElementById('home'),
            dashboard: document.getElementById('dashboard'),
            invest: document.getElementById('invest'),
            referral: document.getElementById('referral'),
            whitepaper: document.getElementById('whitepaper'),
            audit: document.getElementById('audit'),
            downloads: document.getElementById('downloads'),
            faq: document.getElementById('faq')
        };
        
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
            setupEventListeners();
            generateInvestmentPlans();
            checkPreloader();
            checkURLForReferral();
            setupAdvancedEffects();
        });

        function setupAdvancedEffects() {
            const spotlight = document.getElementById('spotlight');
            if (spotlight) {
                window.addEventListener('mousemove', (e) => {
                    document.documentElement.style.setProperty('--mouse-x', e.clientX + 'px');
                    document.documentElement.style.setProperty('--mouse-y', e.clientY + 'px');
                });
            }

            const fadeInElements = document.querySelectorAll('.fade-in');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            fadeInElements.forEach(el => observer.observe(el));
            initializeTiltEffect(document.querySelectorAll('.tilt-card'));
        }

        function initializeTiltEffect(elements) {
            elements.forEach(card => {
                if (card.dataset.tiltInitialized) return;
                const maxTilt = 10;
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const { width, height } = rect;
                    const rotateX = (y / height - 0.5) * -maxTilt * 2;
                    const rotateY = (x / width - 0.5) * maxTilt * 2;
                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
                });
                card.addEventListener('mouseenter', () => { card.style.transition = 'transform 0.1s ease-out'; });
                card.addEventListener('mouseleave', () => {
                    card.style.transition = 'transform 0.5s ease-in-out';
                    card.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg)';
                });
                card.dataset.tiltInitialized = true;
            });
        }

        async function initializeApp() {
            if (typeof window.ethereum !== 'undefined') {
                try {
                    web3 = new Web3(window.ethereum);
                    contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
                    usdtContract = new web3.eth.Contract(USDT_ABI, USDT_ADDRESS);
                    const accounts = await web3.eth.getAccounts();
                    if (accounts.length > 0) {
                        userAccount = accounts[0];
                        updateWalletUI();
                        loadContractData();
                    }
                } catch (error) {
                    showNotification('Error connecting to blockchain', 'error');
                }
            } else {
                showNotification('Please install MetaMask!', 'error');
            }
        }
        
        function setupEventListeners() {
            navToggle.addEventListener('click', () => navMenu.classList.toggle('active'));
            document.querySelectorAll('.nav__link, .footer-link, button[data-section]').forEach(el => {
                el.addEventListener('click', (e) => {
                    e.preventDefault();
                    const section = e.currentTarget.getAttribute('data-section');
                    showSection(section);
                    navMenu.classList.remove('active');
                });
            });
            connectWalletBtn.addEventListener('click', connectWallet);
            if (window.ethereum) {
                window.ethereum.on('accountsChanged', (accounts) => {
                    userAccount = accounts.length > 0 ? accounts[0] : null;
                    updateWalletUI();
                    if(userAccount) loadContractData();
                });
                window.ethereum.on('chainChanged', () => window.location.reload());
            }
            document.getElementById('backToPlans').addEventListener('click', showPlans);
            document.getElementById('confirmInvestment').addEventListener('click', confirmInvestment);
            document.getElementById('investmentAmount').addEventListener('input', updateInvestmentSummary);
            document.getElementById('withdrawEarnings').addEventListener('click', withdrawEarnings);
            document.getElementById('copyLink').addEventListener('click', copyReferralLink);
        }

        function showSection(sectionName) {
            Object.values(sections).forEach(section => { if (section) section.style.display = 'none'; });
            document.querySelectorAll('.nav__link').forEach(link => link.classList.remove('active'));
            if (sections[sectionName]) {
                sections[sectionName].style.display = 'flex';
                window.scrollTo(0, 0);
                const navLink = document.querySelector(`.nav__link[data-section="${sectionName}"]`);
                if (navLink) navLink.classList.add('active');
                if ((sectionName === 'dashboard' || sectionName === 'referral') && userAccount) {
                    loadUserData();
                }
            }
        }

        async function connectWallet() {
            try {
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                if (accounts.length > 0) {
                    userAccount = accounts[0];
                    updateWalletUI();
                    loadContractData();
                    showNotification('Wallet connected successfully!', 'success');
                }
            } catch (error) { showNotification('Failed to connect wallet', 'error'); }
        }

        function updateWalletUI() {
            const alerts = ['dashboardWalletAlert', 'investWalletAlert', 'referralWalletAlert'];
            if (userAccount) {
                connectWalletBtn.innerHTML = `<i class="fas fa-wallet"></i> ${userAccount.substring(0, 6)}...${userAccount.substring(userAccount.length - 4)}`;
                alerts.forEach(id => document.getElementById(id).style.display = 'none');
            } else {
                connectWalletBtn.innerHTML = `<i class="fas fa-wallet"></i> Connect Wallet`;
                alerts.forEach(id => document.getElementById(id).style.display = 'flex');
            }
        }

        async function loadContractData() {
            try {
                const balance = await contract.methods.getContractBalance().call();
                const formattedBalance = parseFloat(web3.utils.fromWei(balance, 'ether')).toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
                document.getElementById('totalTVL').textContent = `$${formattedBalance}`;
                if (userAccount) await loadUserData();
            } catch (error) { console.error('Error loading contract data:', error); }
        }
        
        async function loadUserData() {
            if (!userAccount) return;
            try {
                const userInfo = await contract.methods.getUserInfo(userAccount).call();
                document.getElementById('totalDeposits').textContent = `${parseFloat(web3.utils.fromWei(userInfo.totalDeposits, 'ether')).toFixed(2)} USDT`;
                document.getElementById('availableEarnings').textContent = `${parseFloat(web3.utils.fromWei(userInfo.availableEarnings, 'ether')).toFixed(2)} USDT`;
                document.getElementById('totalWithdrawn').textContent = `${parseFloat(web3.utils.fromWei(userInfo.totalWithdrawn, 'ether')).toFixed(2)} USDT`;
                document.getElementById('referralBonus').textContent = `${parseFloat(web3.utils.fromWei(userInfo.referralBonus, 'ether')).toFixed(2)} USDT`;
                document.getElementById('referralLink').value = `${window.location.origin}${window.location.pathname}?ref=${userAccount}`;
                document.getElementById('quickStats').style.display = 'grid';
                document.getElementById('actionButtons').style.display = 'flex';
            } catch (error) { console.error('Error loading user data:', error); }
        }

        function generateInvestmentPlans() {
            const container = document.getElementById('investmentPlans');
            if (!container) return;
            const plans = [
                {id: 0, name: 'Starter', roi: '1%', range: '20 - 499 USDT', features: ['1% Daily ROI', '150 Days Duration'], featured: false},
                {id: 1, name: 'Advanced', roi: '1.2%', range: '500 - 1,999 USDT', features: ['1.2% Daily ROI', '150 Days Duration'], featured: false},
                {id: 2, name: 'Professional', roi: '1.5%', range: '2,000 - 4,999 USDT', features: ['1.5% Daily ROI', '150 Days Duration'], featured: true},
                {id: 3, name: 'Premium', roi: '1.8%', range: '5,000 - 9,999 USDT', features: ['1.8% Daily ROI', '150 Days Duration'], featured: false},
                {id: 4, name: 'VIP', roi: '2%', range: '10,000+ USDT', features: ['2% Daily ROI', '150 Days Duration'], featured: false}
            ];
            container.innerHTML = plans.map(p => `
                <div class="plan-card tilt-card ${p.featured ? 'featured' : ''}" data-plan-id="${p.id}">
                    ${p.featured ? '<div class="plan-badge">RECOMMENDED</div>' : ''}
                    <div class="plan-name">${p.name} Plan</div>
                    <div class="plan-roi">${p.roi} Daily</div>
                    <div class="plan-range">${p.range}</div>
                    <ul class="plan-features">${p.features.map(f => `<li><i class="fas fa-check"></i> ${f}</li>`).join('')}</ul>
                    <button class="btn btn--primary" style="margin-top: auto;"><i class="fas fa-arrow-right"></i> Select Plan</button>
                </div>`).join('');
            
            container.querySelectorAll('.plan-card').forEach(c => c.addEventListener('click', (e) => selectPlan(parseInt(e.currentTarget.dataset.planId))));
            initializeTiltEffect(container.querySelectorAll('.tilt-card'));
        }
        
        function selectPlan(planId) {
            if (!userAccount) return showNotification('Please connect your wallet first!', 'error');
            const plansData = [{id:0,min:20,max:499},{id:1,min:500,max:1999},{id:2,min:2000,max:4999},{id:3,min:5000,max:9999},{id:4,min:10000,max:Infinity}];
            selectedPlan = plansData.find(p => p.id === planId);
            if (selectedPlan) showInvestmentForm();
        }
        
        function showInvestmentForm() {
            document.getElementById('investmentPlans').style.display = 'none';
            document.getElementById('investmentForm').style.display = 'block';
            document.getElementById('amountRange').textContent = `Min: ${selectedPlan.min} USDT, Max: ${selectedPlan.max === Infinity ? 'Unlimited' : selectedPlan.max + ' USDT'}`;
            document.getElementById('investmentAmount').min = selectedPlan.min;
            document.getElementById('investmentAmount').max = selectedPlan.max === Infinity ? '' : selectedPlan.max;
        }

        function showPlans() {
            document.getElementById('investmentPlans').style.display = 'grid';
            document.getElementById('investmentForm').style.display = 'none';
            selectedPlan = null;
        }
        
        function updateInvestmentSummary() {
            const amount = parseFloat(document.getElementById('investmentAmount').value) || 0;
            document.getElementById('summaryAmount').textContent = `${amount.toFixed(2)} USDT`;
        }

        async function confirmInvestment() {
            if (!userAccount || !selectedPlan) return showNotification('Please connect wallet and select a plan', 'error');
            const amount = parseFloat(document.getElementById('investmentAmount').value);
            if (isNaN(amount) || amount < selectedPlan.min || (selectedPlan.max !== Infinity && amount > selectedPlan.max)) {
                return showNotification('Invalid investment amount for this plan', 'error');
            }
            let refAddr = document.getElementById('referrerAddress').value.trim() || referralAddress || '0x0000000000000000000000000000000000000000';
            if (!web3.utils.isAddress(refAddr)) return showNotification('Invalid referrer address', 'error');
            
            const btn = document.getElementById('confirmInvestment');
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            
            try {
                const amountWei = web3.utils.toWei(amount.toString(), 'ether');
                const allowance = await usdtContract.methods.allowance(userAccount, CONTRACT_ADDRESS).call();
                if (new BigNumber(allowance).isLessThan(new BigNumber(amountWei))) {
                    showNotification('Approving USDT...', 'info');
                    await usdtContract.methods.approve(CONTRACT_ADDRESS, amountWei).send({ from: userAccount });
                    showNotification('Approval successful. Now confirming deposit...', 'success');
                }
                await contract.methods.deposit(amountWei, selectedPlan.id, refAddr).send({ from: userAccount });
                showNotification('Investment successful!', 'success');
                document.getElementById('investmentSuccessPopup').classList.add('active');
                await loadUserData();
            } catch (error) {
                showNotification(error.message.includes("rejected") ? 'Transaction rejected' : 'Investment failed', 'error');
            } finally {
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-check-circle"></i> Confirm Investment';
            }
        }

        async function withdrawEarnings() {
            if (!userAccount) return showNotification('Please connect wallet', 'error');
            const btn = document.getElementById('withdrawEarnings');
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Withdrawing...';
            try {
                await contract.methods.withdraw().send({ from: userAccount });
                showNotification('Withdrawal successful!', 'success');
                await loadUserData();
            } catch (error) {
                showNotification(error.message.includes("rejected") ? 'Transaction rejected' : 'Withdrawal failed', 'error');
            } finally {
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-download"></i> Withdraw Earnings';
            }
        }
        
        function copyReferralLink() {
            const linkInput = document.getElementById('referralLink');
            navigator.clipboard.writeText(linkInput.value).then(() => showNotification('Referral link copied!', 'success'));
        }

        function showNotification(message, type = 'info') {
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            setTimeout(() => notification.classList.remove('show'), 5000);
        }

        function checkPreloader() {
            window.addEventListener('load', () => setTimeout(() => preloader.classList.add('fade-out'), 500));
        }

        function checkURLForReferral() {
            const ref = new URLSearchParams(window.location.search).get('ref');
            if (ref && web3.utils.isAddress(ref)) {
                referralAddress = ref;
                document.getElementById('referrerAddress').value = ref;
                showNotification('Referral address detected!', 'success');
            }
        }
    </script>

</body>
</html>
